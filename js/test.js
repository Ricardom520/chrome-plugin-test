(()=>{"use strict";var e=[{pro:0,color:"#FFE652"},{pro:1,color:"#FCD21C"}];const o=function(){function o(){this.canvas=document.getElementById("yylive_bear"),this.rightEyeInfo={angle:25,centerX:102,centerY:89,ampl:23,flag:!0,distance:14,num:0}}return o.prototype.init=function(){this.canvasRender()},o.prototype.canvasRender=function(){var o=this,r=this.canvas.getContext("2d");this.canvas.addEventListener("click",(function(){var e=setInterval((function(){4===o.rightEyeInfo.num?(clearInterval(e),o.rightEyeInfo.num=0):f()}),25)})),r.save(),r.beginPath(),r.moveTo(20,115),r.bezierCurveTo(35,140,115,140,130,115),r.bezierCurveTo(130,115,155,80,90,45),r.bezierCurveTo(130,160,160,20,100,52),r.bezierCurveTo(100,52,95,48,90,45),r.bezierCurveTo(88,45,95,28,70,45),r.bezierCurveTo(70,45,65,48,62,50),r.bezierCurveTo(62,50,20,20,25,78),r.bezierCurveTo(25,78,50,60,70,45),r.bezierCurveTo(70,45,0,75,20,115),function(e,o,r,t,n,i){for(var a=e.createLinearGradient(20,115,135,135),c=0;c<i.length;c++)a.addColorStop(i[c].pro,i[c].color);e.fillStyle=a,e.fill()}(r,0,0,0,0,e),r.closePath(),r.restore(),r.save(),r.beginPath(),r.moveTo(52,55),r.bezierCurveTo(52,55,30,40,35,68),d(r,"#8D4F1F"),r.closePath(),r.restore(),r.save(),r.beginPath(),r.moveTo(125,74),r.bezierCurveTo(125,74,130,50,110,58),d(r,"#8D4F1F"),r.closePath(),r.restore(),r.save(),r.beginPath(),r.moveTo(78,80),r.bezierCurveTo(70,55,40,65,35,95),r.bezierCurveTo(35,95,30,122,60,110),r.bezierCurveTo(60,110,80,95,100,110),r.bezierCurveTo(100,110,125,125,122,96),r.bezierCurveTo(122,90,106,45,87,80),r.bezierCurveTo(87,80,84,85,78,80),r.closePath(),d(r,"#8D4F1F"),r.restore(),h(r,60,88,10,13,"#FFF"),h(r,61,88,8,10,"#8D4F1F"),h(r,64,85,3,4,"#fff");var t=this.rightEyeInfo,n=t.centerX,i=t.centerY,a=t.ampl,c=t.angle,l=this.rightEyeInfo,v=l.distance,s=l.flag,u=l.num;function f(){if(4!==u){r.save(),0===v?s=!1:14===v&&(s=!0),s?v--:v++,r.beginPath();var e=.5522848,o=10*e,t=13*e;r.moveTo(92,89),r.bezierCurveTo(92,89-t,102-o,76,102,76),r.bezierCurveTo(102+o,76,112,89-t,112,89),r.bezierCurveTo(112,89+t,102+o,102,102,102),r.bezierCurveTo(102-o,102,92,89+t,92,89),r.fillStyle="#fff",r.fill(),h(r,102,89,8,10,"#8D4F1F"),h(r,104,87,3,4,"#fff"),r.beginPath(),r.strokeStyle="#8D4F1F";for(var l=0;l<c;l++)r.moveTo(n-c/2+l,i-v),r.lineTo(n-c/2+l,i-Math.floor(Math.sin(Math.PI*l/c)*a)),r.moveTo(n-c/2+l,i+v),r.lineTo(n-c/2+l,i+Math.floor(Math.sin(Math.PI*l/c)*a)),r.stroke(),l===c-1&&u++;r.closePath(),r.restore()}}function h(e,o,r,t,n,i){var a=t>n?1/t:1/n;e.beginPath(),e.moveTo(o+t,r);for(var c=0;c<2*Math.PI;c+=a)e.lineTo(o+t*Math.cos(c),r+n*Math.sin(c));e.closePath(),d(e,i)}function d(e,o){e.fillStyle=o,e.fill()}f(),r.save(),r.moveTo(74,114),r.beginPath(),r.bezierCurveTo(74,114,80,124,88,114),r.closePath(),d(r,"#8D4F1F"),r.restore()},o.prototype.dbclick=function(e){console.log("===="),this.canvas.addEventListener("dblclick",(function(){console.log("dblclick"),e()}))},o}();var r=function(){function e(){this.init()}return e.prototype.init=function(){var e=document.createElement("div");e.id="yybear_pop",e.appendChild(this.createFrag("<canvas id='yylive_bear'></canvas>")),document.body.appendChild(e),this.render()},e.prototype.createFrag=function(e){return document.createRange().createContextualFragment(e)},e.prototype.render=function(){var e=new o;e.init(),e.dbclick((function(){console.log("dbclick"),navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!0}).then((function(e){console.log("授权成功！")}),(function(){console.error("授权失败！")})):console.error("浏览器不支持 getUserMedia")}))},e}();window.onload=function(){new r}})();